package com.crm.action;

import java.util.List;
import java.util.Map;

import javax.annotation.Resource;

import org.apache.struts2.interceptor.RequestAware;
import org.apache.struts2.interceptor.SessionAware;

import com.crm.model.Bas_product_t;
import com.crm.model.Bas_dict_t;
import com.crm.service.DictService;


public class DictAction implements RequestAware, SessionAware {


	@Resource(name="DictService")
	private DictService dictService;
	
	private Map request;
	private	Map session;
	//数据字典
	private Bas_dict_t bas_dict_t;
	//产品
	private Bas_product_t bas_product_t;

	private int id;
	/**
	 * 用于查询字典
	 */
	private String type;
	private String name;
	private String value;
	/**
	 * 用于查询产品
	 */
	private String pname;
	private String ptype;
	private String prank;
	
	
	
	/**
	 * 添加保存数据字典信息
	 * @return
	 */
	public String addDict(){
		dictService.saveDict(bas_dict_t);
		request.put("bas_dict_t", bas_dict_t);
		
		return "dictCreate";
	}
	
	/**
	 * 打开新建数据字典页面
	 * @return
	 */
	public String openInfoDict(){	
		return "dictCreate";
	}
	
	/**
	 * 打开产品信息页面
	 * @return
	 */
	public String openProduct(){	
		return "dictProduct";
	}
	
	/**
	 * 打开库存信息页面
	 * @return
	 */
	public String openStock(){	
		return "dictStock";
	}
	public String openAlter(){
		Bas_dict_t b=dictService.find(id, Bas_dict_t.class);
		request.put("dict", b);
		openCreateDict();
		return "dictAlter";
	}
	/**
	 * 数据字典查询
	 * @return
	 */
	public String searchDict(){
		List<Bas_dict_t> list=dictService.showDict(type, name, value);
		request.put("dictList", list);
		return "dictOpen";
	}
	/**
	 * 产品查询
	 * @return
	 */
	public String searchPro(){
		List<Bas_product_t> list=dictService.showProduct(pname, ptype, prank);
		request.put("proList", list);
		return "dictProduct";
	}
	/**
	 * 具体数据查询---可以省略
	 * @return	
	 * public String searchDictData(){
		List<Bas_dict_t> list=dictService.showDict(id);
		request.put("dictDataList", list);
		//System.out.println(id);
		return "dictAlter";
	}
	 */

	public DictService getDictService() {
		return dictService;
	}
	public void setDictService(DictService dictService) {
		this.dictService = dictService;
	}
	public Bas_dict_t getBas_dict_t() {
		return bas_dict_t;
	}
	public void setBas_dict_t(Bas_dict_t bas_dict_t) {
		this.bas_dict_t = bas_dict_t;
	}
	/*public String listDict(){
		List<Bas_dict_t> list=dictService.showDict();
		request.put("dicttList", list);
		return "dictList";
	}*/
	/**
	 * 打开创建基础数据界面
	 */
	public String openCreateDict(){
		List<Bas_dict_t> list=dictService.showDict(null, null, null);
		request.put("dictList", list);
		return "dictOpen";
	}
	@Override
	public void setSession(Map<String, Object> arg0) {
		// TODO Auto-generated method stub
		session=arg0;
	}

	@Override
	public void setRequest(Map<String, Object> arg0) {
		// TODO Auto-generated method stub
		request=arg0;
	}
	public String getType() {
		return type;
	}
	public void setType(String type) {
		this.type = type;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public String getValue() {
		return value;
	}
	public void setValue(String value) {
		this.value = value;
	}
	public String getPname() {
		return pname;
	}
	public void setPname(String pname) {
		this.pname = pname;
	}
	public String getPtype() {
		return ptype;
	}
	public void setPtype(String ptype) {
		this.ptype = ptype;
	}
	public String getPrank() {
		return prank;
	}
	public void setPrank(String prank) {
		this.prank = prank;
	}
	public int getId() {
		return id;
	}
	public void setId(int id) {
		this.id = id;
	}
	public Bas_product_t getBas_product_t() {
		return bas_product_t;
	}
	public void setBas_product_t(Bas_product_t bas_product_t) {
		this.bas_product_t = bas_product_t;
	}
	
}
